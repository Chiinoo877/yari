# Check if commit signing is enabled
function is_signing_enabled {
    local value=$(git config --get commit.gpgSign)
    if [[ "$value" == "true" || "$value" == "1" || "$value" == "yes" ]]; then
        return 0
    else
        return 1
    fi
}

if [ ! is_signing_enabled ]; then
    echo "ERROR: Commit signing is NOT enabled!"
    echo "Please note that we require that all commits are signed."
    echo "Please see the documentation about signed commits and how to sign yours on GitHub:"
    echo "- https://docs.github.com/en/authentication/managing-commit-signature-verification/about-commit-signature-verification"
    echo "- https://docs.github.com/en/authentication/managing-commit-signature-verification/signing-commits"
    exit 1
fi

yarn install --ignore-scripts && yarn lint-staged
